# Telegram Subscription Bot

MVP бота для оформления платных подписок на Telegram-каналы. Бот разработан с использованием [aiogram](https://docs.aiogram.dev/) и [Celery](https://docs.celeryproject.org/) для отслеживания статуса подписок.

## Содержание

- [Особенности](#особенности)
- [Технологии](#технологии)
- [Предварительные требования](#предварительные-требования)
- [Установка](#установка)
  - [Клонирование репозитория](#клонирование-репозитория)
  - [Настройка проекта](#настройка-проекта)
- [Запуск бота](#запуск-бота)
  - [Сборка и запуск контейнеров](#сборка-и-запуск-контейнеров)


## Особенности

- **Оформление подписки**: Пользователи могут оформить платную подписку на Telegram-канал прямо через бота.
- **Отслеживание статуса**: Использование Celery для мониторинга и обновления статусов подписок в реальном времени.
- **Удобный интерфейс**: Интуитивно понятные команды и меню для взаимодействия с ботом.
- **Безопасность**: Хранение секретных данных в `.env` файле с использованием переменных окружения.
- **Асинхронность**: Высокая производительность благодаря асинхронной обработке запросов.
- **Масштабируемость**: Возможность легко масштабировать сервисы при увеличении нагрузки.

## Технологии

- **Python**: Основной язык программирования.
- **aiogram**: Фреймворк для разработки Telegram-ботов.
- **Celery**: Система для асинхронных задач и отслеживания подписок.
- **Docker & Docker Compose**: Контейнеризация приложения для упрощенного развёртывания.
- **Redis**: В качестве брокера сообщений для Celery.
- **PostgreSQL**: База данных для хранения информации о пользователях и подписках.

## Предварительные требования

Перед началом убедитесь, что на вашем компьютере установлены следующие инструменты:

- [Docker](https://www.docker.com/get-started)
- [Docker Compose](https://docs.docker.com/compose/install/)
- [Git](https://git-scm.com/downloads)

## Установка

### Клонирование репозитория

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/TrueLemmus/subscription_tg_bot.git
    cd subscription_tg_bot
    ```

### Настройка проекта

2. **Создайте файл `.env`:**

    Скопируйте пример файла конфигурации и заполните необходимыми данными.

    ```bash
    cp env.template .env
    ```

    Откройте `.env` и заполните следующие переменные:

    ```env
    BOT_TOKEN="<TELEGRAM_BOT_TOKEN>"
    DATABASE_NAME="subscriptions.db"
    CELERY_BROKER="redis://redis:6379/0"
    CELERY_BACKEND="redis://redis:6379/0"
    PRIVATE_CHANNEL_ID="<TELEGRAM_PRIVATE_CHANNEL_ID"
    PAYMENTS_TOKEN="<PAYMENT_SERVICE_TOKEN"
    ```

    **Описание переменных:**

    - `BOT_TOKEN`: Токен вашего Telegram бота.
    - `DATABASE_NAME`: Имя базы данных.
    - `CELERY_BROKER`: URL для подключения к Redis.
    - `CELERY_BACKEND`: URL для подключения к Redis.
    - `PRIVATE_CHANNEL_ID`: ID канала на который осуществляется подписка.
    - `PAYMENTS_TOKEN`: API ключ для интеграции с платежным провайдером.

## Запуск бота

### Сборка и запуск контейнеров

Для запуска бота и всех зависимостей используйте команду:

```bash
docker-compose up --build
